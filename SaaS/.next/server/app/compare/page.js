<<<<<<< HEAD
(()=>{var e={};e.id=402,e.ids=[402],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},5511:e=>{"use strict";e.exports=require("crypto")},4735:e=>{"use strict";e.exports=require("events")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1645:e=>{"use strict";e.exports=require("net")},3873:e=>{"use strict";e.exports=require("path")},1997:e=>{"use strict";e.exports=require("punycode")},7910:e=>{"use strict";e.exports=require("stream")},4631:e=>{"use strict";e.exports=require("tls")},9551:e=>{"use strict";e.exports=require("url")},4075:e=>{"use strict";e.exports=require("zlib")},4650:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=t(260),a=t(8203),n=t(5155),l=t.n(n),i=t(7292),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let c=["",{children:["compare",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,109)),"/home/arman/projects/ContractLens/SaaS/src/app/compare/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,8162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,1354)),"/home/arman/projects/ContractLens/SaaS/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,8162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/arman/projects/ContractLens/SaaS/src/app/compare/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/compare/page",pathname:"/compare",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7465:(e,s,t)=>{Promise.resolve().then(t.bind(t,109))},4441:(e,s,t)=>{Promise.resolve().then(t.bind(t,8345))},8345:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(5512),a=t(8009),n=t(9334),l=t(6753),i=t(7144),o=t(3161),c=t(9333),d=t(9462),m=t(8188),p=t(3053);function x(){let[e,s]=(0,a.useState)(null),[t,x]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),[y,b]=(0,a.useState)(null),j=(0,n.useRouter)(),{session:v}=(0,c.A)(),{company:N,isLoading:w}=(0,d.P)(),C=(e,t)=>{let r=e.target.files?.[0];r&&("seller"===t?s(r):x(r))},P=async()=>{if(!e||!t){b("Please upload both contract files");return}if(!v){b("You must be logged in to use this feature"),j.push("/log-in");return}h(!0),b(null);try{let s=new FormData;s.append("seller_tc",e),s.append("buyer_tc",t);let r=await fetch("localhost/process",{method:"POST",body:s,headers:{Authorization:`Bearer ${v.access_token}`}});if(401===r.status)throw Error("Authentication failed. Please log in again.");if(!r.ok)throw Error("Failed to process documents");let a=await r.json();f(a),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}catch(e){console.error("Error:",e),b(e.message||"An error occurred while processing the documents. Please try again."),e.message.includes("Authentication failed")&&(await m.N.auth.signOut(),j.push("/log-in"))}finally{h(!1)}};return w?(0,r.jsx)(p.G,{children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen",children:[(0,r.jsx)(l.A,{className:"w-10 h-10 animate-spin text-blue-500"}),(0,r.jsx)("span",{className:"ml-2 text-lg",children:"Loading your company information..."})]})}):N?.name?(0,r.jsx)(p.G,{children:(0,r.jsx)("div",{className:"bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Contract Analysis"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"Upload your contracts to identify risks, compare terms, and get actionable insights"})]}),(0,r.jsx)("div",{className:"bg-white shadow sm:rounded-lg overflow-hidden mb-8",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Upload Contract Documents"}),y&&(0,r.jsx)("div",{className:"mb-4 rounded-md bg-red-50 p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(i.A,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:y})})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[N.name,"'s Contract Template"]}),(0,r.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,r.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,r.jsx)(o.A,{className:"w-10 h-10 mb-3 text-gray-400"}),(0,r.jsxs)("p",{className:"mb-2 text-sm text-gray-500",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"PDF (Max. 10MB)"})]}),(0,r.jsx)("input",{type:"file",accept:".pdf",className:"hidden",onChange:e=>C(e,"seller")})]})}),e&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 truncate",children:["Selected: ",e.name]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Client's Contract Document"}),(0,r.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,r.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,r.jsx)(o.A,{className:"w-10 h-10 mb-3 text-gray-400"}),(0,r.jsxs)("p",{className:"mb-2 text-sm text-gray-500",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"PDF (Max. 10MB)"})]}),(0,r.jsx)("input",{type:"file",accept:".pdf",className:"hidden",onChange:e=>C(e,"buyer")})]})}),t&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 truncate",children:["Selected: ",t.name]})]})]}),(0,r.jsx)("div",{className:"mt-6 flex justify-center",children:(0,r.jsx)("button",{onClick:P,disabled:u||!e||!t,className:`px-4 py-2 rounded-md text-white font-medium flex items-center
                    ${!u&&e&&t?"bg-[#4A7CFF] hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{className:"w-5 h-5 mr-2 animate-spin"}),"Analyzing Contracts..."]}):"Analyze Contracts"})})]})}),g&&(0,r.jsx)("div",{className:"bg-white shadow sm:rounded-lg overflow-hidden",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Analysis Results"}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Summary of Key Issues"}),(0,r.jsx)("div",{className:"prose max-w-none bg-gray-50 p-4 rounded-lg",children:(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:g.summary})})]})]})})]})})}):(0,r.jsx)(p.G,{children:(0,r.jsx)("div",{className:"bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"max-w-md mx-auto text-center",children:(0,r.jsxs)("div",{className:"bg-white shadow sm:rounded-lg overflow-hidden p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Welcome to ContractLens!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Before you start analyzing contracts, please take a moment to set up your company profile. This information will be used to personalize your contract analysis."}),(0,r.jsx)("button",{onClick:()=>{j.push("/profile")},className:"px-4 py-2 rounded-md text-white font-medium bg-[#4A7CFF] hover:bg-blue-700",children:"Set Up Company Profile"})]})})})})}},109:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/arman/projects/ContractLens/SaaS/src/app/compare/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/arman/projects/ContractLens/SaaS/src/app/compare/page.tsx","default")},3161:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4825).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,647,367,228],()=>t(4650));module.exports=r})();
||||||| 40d75bd
const CHUNK_PUBLIC_PATH = "server/app/compare/page.js";
const runtime = require("../../chunks/ssr/[turbopack]_runtime.js");
runtime.loadChunk("server/chunks/ssr/node_modules_next_dist_97f32f._.js");
runtime.loadChunk("server/chunks/ssr/[root of the server]__592060._.js");
runtime.loadChunk("server/chunks/ssr/src_app_2c7daa._.js");
runtime.loadChunk("server/chunks/ssr/[root of the server]__439abc._.js");
runtime.loadChunk("server/chunks/ssr/[root of the server]__9a168d._.css");
runtime.loadChunk("server/chunks/ssr/node_modules_ce97a5._.js");
runtime.loadChunk("server/chunks/ssr/node_modules_next_dist_client_components_forbidden-error_b4e556.js");
runtime.loadChunk("server/chunks/ssr/node_modules_next_dist_client_components_unauthorized-error_d758e6.js");
runtime.loadChunk("server/chunks/ssr/_3ba9d8._.js");
runtime.getOrInstantiateRuntimeModule("[project]/.next-internal/server/app/compare/page/actions.js [app-rsc] (ecmascript)", CHUNK_PUBLIC_PATH);
module.exports = runtime.getOrInstantiateRuntimeModule("[project]/node_modules/next/dist/esm/build/templates/app-page.js?page=/compare/page { METADATA_0 => \"[project]/src/app/icon.png.mjs { IMAGE => \\\"[project]/src/app/icon.png [app-rsc] (static)\\\" } [app-rsc] (structured image object, ecmascript, Next.js server component)\", MODULE_1 => \"[project]/src/app/layout.tsx [app-rsc] (ecmascript, Next.js server component)\", MODULE_2 => \"[project]/node_modules/next/dist/client/components/not-found-error.js [app-rsc] (ecmascript, Next.js server component)\", MODULE_3 => \"[project]/node_modules/next/dist/client/components/forbidden-error.js [app-rsc] (ecmascript, Next.js server component)\", MODULE_4 => \"[project]/node_modules/next/dist/client/components/unauthorized-error.js [app-rsc] (ecmascript, Next.js server component)\", MODULE_5 => \"[project]/src/app/compare/page.tsx [app-rsc] (ecmascript, Next.js server component)\" } [app-rsc] (ecmascript)", CHUNK_PUBLIC_PATH).exports;
=======
(()=>{var e={};e.id=402,e.ids=[402],e.modules={145:(e,t,r)=>{"use strict";r.d(t,{CompanyProvider:()=>l,P:()=>c});var s=r(60687),a=r(43210),n=r(33634),i=r(52581);let o=(0,a.createContext)(void 0);function l({children:e}){let{supabase:t,session:r}=(0,n._)(),[l,c]=(0,a.useState)(null),[d,m]=(0,a.useState)(!0),u=async()=>{try{if(!r?.user?.id)return void c(null);let{data:e,error:s}=await t.from("company_information").select("*").single();if(s)return void("PGRST116"===s.code?c(null):(console.error("Error fetching company:",s),i.o.error("Failed to load company information")));c(e)}catch(e){console.error("Error in company fetch:",e),i.o.error("Failed to load company information")}finally{m(!1)}},p=async e=>{try{let s;if(!r?.user?.id)throw Error("No authenticated user");if((s=l?.id?await t.from("company_information").update({company_name:e.company_name,contact_email:e.contact_email,contact_phone:e.contact_phone,address:e.address}).eq("id",l.id):await t.from("company_information").insert([{company_name:e.company_name,contact_email:e.contact_email,contact_phone:e.contact_phone,address:e.address}])).error)throw s.error;await u(),i.o.success("Company details saved successfully")}catch(e){throw console.error("Error saving company details:",e),i.o.error("Failed to save company details"),e}};return(0,s.jsx)(o.Provider,{value:{company:l,isLoading:d,saveCompanyDetails:p,refreshCompany:u},children:e})}function c(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useCompany must be used within a CompanyProvider");return e}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},15036:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},16189:(e,t,r)=>{"use strict";var s=r(65773);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33634:(e,t,r)=>{"use strict";r.d(t,{_:()=>l,default:()=>o});var s=r(60687),a=r(43210),n=r(94025);let i=(0,a.createContext)(void 0);function o({children:e}){let[t]=(0,a.useState)(()=>(0,n.UU)("https://gqkgqiutnxzbjdocebrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdxa2dxaXV0bnh6Ympkb2NlYnJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYzNzMzNDMsImV4cCI6MjA2MTk0OTM0M30.VkjQjPDgqqwQwv9C6uRPZj2-qcrf_TyianJEZHlHDPw")),[r,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(null);return(0,s.jsx)(i.Provider,{value:{supabase:t,user:r,session:l},children:e})}let l=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useSupabase must be used inside SupabaseProvider");return e}},33835:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35067:(e,t,r)=>{Promise.resolve().then(r.bind(r,49332))},36644:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},38770:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var s=r(65239),a=r(48088),n=r(88170),i=r.n(n),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c={children:["",{children:["compare",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,49332)),"C:\\Users\\zenyi\\Documents\\ContractSentinel\\ContractLens\\SaaS\\src\\app\\compare\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,78162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\zenyi\\Documents\\ContractSentinel\\ContractLens\\SaaS\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,78162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["C:\\Users\\zenyi\\Documents\\ContractSentinel\\ContractLens\\SaaS\\src\\app\\compare\\page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/compare/page",pathname:"/compare",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},40375:(e,t,r)=>{"use strict";r.d(t,{CompanyProvider:()=>a});var s=r(12907);let a=(0,s.registerClientReference)(function(){throw Error("Attempted to call CompanyProvider() from the server but CompanyProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\zenyi\\Documents\\ContractSentinel\\ContractLens\\SaaS\\src\\context\\CompanyContext.tsx","CompanyProvider");(0,s.registerClientReference)(function(){throw Error("Attempted to call useCompany() from the server but useCompany is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\zenyi\\Documents\\ContractSentinel\\ContractLens\\SaaS\\src\\context\\CompanyContext.tsx","useCompany")},45683:(e,t,r)=>{Promise.resolve().then(r.bind(r,57652))},49332:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\zenyi\\\\Documents\\\\ContractSentinel\\\\ContractLens\\\\SaaS\\\\src\\\\app\\\\compare\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\zenyi\\Documents\\ContractSentinel\\ContractLens\\SaaS\\src\\app\\compare\\page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57652:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(60687),a=r(43210),n=r(16189),i=r(82614);let o=(0,i.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var l=r(72963),c=r(36644),d=r(145),m=r(33634),u=r(86084),p=r(15036),h=r(58450);let x=(0,i.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function y({term:e,onStatusChange:t,onNotesChange:r}){let[n,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(e.notes||""),d={pending:(0,s.jsx)(p.A,{className:"w-5 h-5"}),accepted:(0,s.jsx)(h.A,{className:"w-5 h-5"}),rejected:(0,s.jsx)(x,{className:"w-5 h-5"}),negotiated:(0,s.jsx)(l.A,{className:"w-5 h-5"})};return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:e.description})]}),(0,s.jsx)("div",{className:"ml-4 flex items-center space-x-2",children:Object.entries({pending:"bg-gray-100 text-gray-700",accepted:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700",negotiated:"bg-blue-100 text-blue-700"}).map(([r,a])=>(0,s.jsx)("button",{onClick:()=>t(e.id,r),className:`p-2 rounded-full ${a} ${e.status===r?"ring-2 ring-offset-2 ring-gray-400":""}`,title:r.charAt(0).toUpperCase()+r.slice(1),children:d[r]},r))})]}),(0,s.jsx)("button",{onClick:()=>i(!n),className:"mt-2 text-sm text-blue-600 hover:text-blue-800",children:n?"Show less":"Show more"}),n&&(0,s.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Seller's Version"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:e.sellerVersion})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Buyer's Version"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:e.buyerVersion})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,s.jsx)("textarea",{value:o,onChange:t=>{let s=t.target.value;c(s),r(e.id,s)},className:"w-full text-sm text-gray-600 bg-gray-50 p-3 rounded border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Add your notes here..."})]})]})]})})}function f(){let[e,t]=(0,a.useState)(null),[r,i]=(0,a.useState)(null),[p,h]=(0,a.useState)(!1),[x,f]=(0,a.useState)(null),[g,b]=(0,a.useState)(null),[v,j]=(0,a.useState)(null),[C,w]=(0,a.useState)([]),[N,k]=(0,a.useState)([]),P=(0,n.useRouter)(),{supabase:S,session:A}=(0,m._)(),{company:_,isLoading:z}=(0,d.P)(),q=async(e,r)=>{let s=e.target.files?.[0];if(s){if("application/pdf"!==s.type){j("Please upload a PDF file"),e.target.value="";return}if(s.size>0xa00000){j("File size must be less than 10MB"),e.target.value="";return}try{j(null),f(r),"seller"===r?t(s):i(s)}catch(t){console.error("Error handling file:",t),j("Failed to process the uploaded file. Please try again."),e.target.value=""}finally{f(null)}}},L=(e,t)=>{w(r=>r.map(r=>r.id===e?{...r,status:t}:r))},E=(e,t)=>{w(r=>r.map(r=>r.id===e?{...r,notes:t}:r))},M=async()=>{if(!e||!r)return void j("Please upload both contract files");if(!A){j("You must be logged in to use this feature"),P.push("/log-in");return}if(!_?.id)return void j("Company profile not found");h(!0),j(null);try{let[t,s]=await Promise.all([e.arrayBuffer().then(e=>Buffer.from(e).toString("base64")),r.arrayBuffer().then(e=>Buffer.from(e).toString("base64"))]),{data:a,error:n}=await S.functions.invoke("process-contracts",{body:{sellerContent:t,buyerContent:s,companyId:_.id,priorities:N},headers:{"Content-Type":"application/json",Authorization:`Bearer ${A.access_token}`}});if(n)throw console.error("Edge Function error:",n),Error(n.message||"Failed to process contracts");if(!a)throw Error("No data received from the analysis");let i=(a.summary||"").split(/[.!?](?=\s|$)/).filter(e=>e.trim().length>0),o=[{key:"definitions",title:"Definitions and Terms",keywords:["definition","terms","clarity"]},{key:"payment",title:"Payment Terms",keywords:["payment","cash flow","financial","interest","withhold"]},{key:"delivery",title:"Delivery and Equipment",keywords:["delivery","equipment","return","operational"]},{key:"ip",title:"Intellectual Property",keywords:["intellectual property","ownership","assets"]},{key:"personnel",title:"Personnel and Safety",keywords:["personnel","security","safety","compliance"]},{key:"liability",title:"Liability and Indemnification",keywords:["liability","indemnif","damage","risk"]},{key:"termination",title:"Termination Rights",keywords:["terminat","default","rights"]}],l={};i.forEach(e=>{let t=e.trim();t&&o.filter(e=>e.keywords.some(e=>t.toLowerCase().includes(e.toLowerCase()))).forEach(e=>{l[e.key]||(l[e.key]=[]),l[e.key].push(t)})});let c=o.filter(e=>l[e.key]?.length>0).map((e,t)=>{let r=l[e.key],s=r.filter(e=>e.toLowerCase().includes("buyer")).join(" "),a=r.filter(e=>e.toLowerCase().includes(_.company_name?.toLowerCase()||"")||e.toLowerCase().includes("seller")).join(" ");return{id:`term-${t}`,title:e.title,description:r.join(" "),status:"pending",buyerVersion:s||"Buyer version not specified",sellerVersion:a||"Seller version not specified",notes:""}});w(c),b({terms:c,summary:a.summary||"No additional notes available"}),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}catch(e){console.error("Error details:",e),j(e.message||"An error occurred while processing the documents. Please try again."),(e.message?.toLowerCase().includes("authentication")||e.message?.toLowerCase().includes("unauthorized"))&&(await S.auth.signOut(),P.push("/log-in"))}finally{h(!1)}};return z?(0,s.jsx)(u.G,{children:(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen",children:[(0,s.jsx)(o,{className:"w-10 h-10 animate-spin text-blue-500"}),(0,s.jsx)("span",{className:"ml-2 text-lg",children:"Loading your company information..."})]})}):_?.company_name?(0,s.jsx)(u.G,{children:(0,s.jsx)("div",{className:"bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Contract Analysis"}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"Upload your contracts to identify risks, compare terms, and get actionable insights"})]}),(0,s.jsx)("div",{className:"bg-white shadow sm:rounded-lg overflow-hidden mb-8",children:(0,s.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Upload Contract Documents"}),v&&(0,s.jsx)("div",{className:"mb-4 rounded-md bg-red-50 p-4",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(l.A,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("h3",{className:"text-sm font-medium text-red-800",children:v})})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[_.company_name,"'s Contract Template"]}),(0,s.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,s.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:["seller"===x?(0,s.jsx)(o,{className:"w-10 h-10 mb-3 text-gray-400 animate-spin"}):(0,s.jsx)(c.A,{className:"w-10 h-10 mb-3 text-gray-400"}),(0,s.jsxs)("p",{className:"mb-2 text-sm text-gray-500",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"PDF (Max. 10MB)"})]}),(0,s.jsx)("input",{type:"file",accept:".pdf,application/pdf",className:"hidden",onChange:e=>q(e,"seller"),disabled:null!==x})]})}),e&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 truncate",children:["Selected: ",e.name]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Client's Contract Document"}),(0,s.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,s.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:["buyer"===x?(0,s.jsx)(o,{className:"w-10 h-10 mb-3 text-gray-400 animate-spin"}):(0,s.jsx)(c.A,{className:"w-10 h-10 mb-3 text-gray-400"}),(0,s.jsxs)("p",{className:"mb-2 text-sm text-gray-500",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"PDF (Max. 10MB)"})]}),(0,s.jsx)("input",{type:"file",accept:".pdf,application/pdf",className:"hidden",onChange:e=>q(e,"buyer"),disabled:null!==x})]})}),r&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 truncate",children:["Selected: ",r.name]})]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-center",children:(0,s.jsx)("button",{onClick:M,disabled:p||!e||!r,className:`px-4 py-2 rounded-md text-white font-medium flex items-center
                    ${p||!e||!r?"bg-gray-400 cursor-not-allowed":"bg-[#4A7CFF] hover:bg-blue-700"}`,children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o,{className:"w-5 h-5 mr-2 animate-spin"}),"Analyzing Contracts..."]}):"Analyze Contracts"})})]})}),g&&(0,s.jsx)("div",{className:"bg-white shadow sm:rounded-lg overflow-hidden",children:(0,s.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Analysis Results"}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Contract Terms Analysis"}),(0,s.jsx)("div",{className:"space-y-4",children:C.map(e=>(0,s.jsx)(y,{term:e,onStatusChange:L,onNotesChange:E},e.id))})]}),g.summary&&0===C.length&&(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Analysis Details"}),(0,s.jsx)("div",{className:"prose max-w-none bg-gray-50 p-4 rounded-lg",children:(0,s.jsx)("pre",{className:"whitespace-pre-wrap text-gray-900",children:g.summary})})]})]})})]})})}):(0,s.jsx)(u.G,{children:(0,s.jsx)("div",{className:"bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"max-w-md mx-auto text-center",children:(0,s.jsxs)("div",{className:"bg-white shadow sm:rounded-lg overflow-hidden p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Welcome to ContractLens!"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Before you start analyzing contracts, please take a moment to set up your company profile. This information will be used to personalize your contract analysis."}),(0,s.jsx)("button",{onClick:()=>{P.push("/profile")},className:"px-4 py-2 rounded-md text-white font-medium bg-[#4A7CFF] hover:bg-blue-700",children:"Set Up Company Profile"})]})})})})}},58450:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},61135:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69464:(e,t,r)=>{Promise.resolve().then(r.bind(r,6931)),Promise.resolve().then(r.bind(r,40375)),Promise.resolve().then(r.bind(r,72820))},70136:(e,t,r)=>{Promise.resolve().then(r.bind(r,52581)),Promise.resolve().then(r.bind(r,145)),Promise.resolve().then(r.bind(r,33634))},72820:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(12907);let a=(0,s.registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\zenyi\\\\Documents\\\\ContractSentinel\\\\ContractLens\\\\SaaS\\\\src\\\\context\\\\SupabaseProvider.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\zenyi\\Documents\\ContractSentinel\\ContractLens\\SaaS\\src\\context\\SupabaseProvider.tsx","default");(0,s.registerClientReference)(function(){throw Error("Attempted to call useSupabase() from the server but useSupabase is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\zenyi\\Documents\\ContractSentinel\\ContractLens\\SaaS\\src\\context\\SupabaseProvider.tsx","useSupabase")},72963:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},73587:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},74075:e=>{"use strict";e.exports=require("zlib")},78162:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(31658);let a=async e=>[{type:"image/png",sizes:"567x604",url:(0,s.fillMetadataSegment)(".",await e.params,"icon.png")+"?48dc7bdfdf6aac7d"}]},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},82614:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(43210);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:c,...d},m)=>(0,s.createElement)("svg",{ref:m,...i,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:n("lucide",o),...d},[...c.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(l)?l:[l]])),l=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...i},l)=>(0,s.createElement)(o,{ref:l,iconNode:t,className:n(`lucide-${a(e)}`,r),...i}));return r.displayName=`${e}`,r}},86084:(e,t,r)=>{"use strict";r.d(t,{G:()=>c});var s=r(60687);r(43210);var a=r(16189),n=r(33634),i=r(85814),o=r.n(i);function l(){let e=(0,a.useRouter)(),{session:t,supabase:r}=(0,n._)(),i=async()=>{await r.auth.signOut(),e.push("/")};return(0,s.jsx)("header",{className:"bg-white shadow",children:(0,s.jsx)("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,s.jsx)(o(),{href:"/",className:"text-xl font-bold text-[#4A7CFF]",children:"ContractLens"})}),(0,s.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[(0,s.jsx)(o(),{href:"/compare",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Compare"}),(0,s.jsx)(o(),{href:"/profile",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Profile"})]})]}),(0,s.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:(0,s.jsx)("button",{onClick:i,className:"border-transparent text-gray-500 hover:text-gray-700 inline-flex items-center px-1 pt-1 text-sm font-medium",children:"Sign Out"})})]})})})}function c({children:e}){(0,a.useRouter)();let{session:t}=(0,n._)();return t?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(l,{}),(0,s.jsx)("main",{children:e})]}):null}},91645:e=>{"use strict";e.exports=require("net")},94431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>c});var s=r(37413),a=r(85041),n=r.n(a);r(61135);var i=r(40375),o=r(72820),l=r(6931);let c={title:"ContractLens - AI-Powered Contract Management",description:"Powerful contract management dashboard powered by artificial intelligence"};function d({children:e}){return(0,s.jsx)("html",{lang:"en",className:"h-full",children:(0,s.jsx)("body",{className:`${n().className} min-h-screen bg-white`,children:(0,s.jsx)(o.default,{children:(0,s.jsxs)(i.CompanyProvider,{children:[e,(0,s.jsx)(l.Toaster,{})]})})})})}},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,71,567],()=>r(38770));module.exports=s})();
>>>>>>> main
